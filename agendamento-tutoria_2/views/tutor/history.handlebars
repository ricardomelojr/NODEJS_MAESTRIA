<div class='container mx-auto p-4'>
  <h1 class='text-3xl font-bold mb-6 text-center text-gray-800'>Histórico de Sessões</h1>

  {{#if historyData.length}}
    <table class='min-w-full bg-white border border-gray-200 rounded-lg shadow-md text-center'>
      <thead class='bg-gray-200'>
        <tr>
          <th class='py-3 px-6 border-b text-gray-700 font-semibold'>Data da Sessão</th>
          <th class='py-3 px-6 border-b text-gray-700 font-semibold'>Ação</th>
        </tr>
      </thead>
      <tbody>
        {{#each historyData}}
          <tr class='hover:bg-gray-100 transition duration-200'>
            <td class='py-3 px-6 border-b text-gray-800'>
              {{this.formattedDate}}
            </td>
            <td class='py-3 px-6 border-b text-gray-800'>
              <!-- Botão para buscar e exibir detalhes -->
              <button
                type='button'
                class='bg-gray-200 text-gray-700 hover:bg-gray-300 text-sm font-semibold py-2 px-4 rounded mx-2 border-dotted border'
                onclick="loadSessionDetails('{{this.idAvailability}}', '{{this.formattedDate}}', '{{@index}}')"
              >
                Detalhes
              </button>

              <!-- Dropdown escondido inicialmente -->
              <div id='dropdown-{{@index}}' class='hidden m-5 bg-white border border-gray-300 rounded shadow-lg'>
                <table class='min-w-full bg-white text-left'>
                  <thead class='bg-gray-100'>
                    <tr>
                      <th class='py-2 px-4 border-b'>Nome</th>
                      <th class='py-2 px-4 border-b'>Status</th>
                    </tr>
                  </thead>
                  <tbody id='details-{{@index}}'>
                    <!-- Detalhes dos alunos serão inseridos aqui via JS -->
                  </tbody>
                </table>
              </div>
            </td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  {{else}}
    <p class='text-gray-500 text-center mt-4'>Nenhuma sessão encontrada no histórico.</p>
  {{/if}}
</div>

<script src='/js/history.js'></script>